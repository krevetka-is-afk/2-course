ĞÑ‚Ñ‡ĞµÑ‚ Ğ¿Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğ¼ Ñ‚ĞµÑÑ‚Ğ°Ğ¼
```test_1
Enter source string: **** user input : Dâˆ‚ÃÆ’âˆ‚âˆ‘Â´Â¨Ë†Ë†Ëšâˆ†ËœËœâˆšÃ·Ã¦â€¦Â¬â‰¤ÂµËœËœÏ€Ã¸Ë†Â¨Â¥
Copied string: Dâˆ‚ÃÆ’âˆ‚âˆ‘Â´Â¨Ë†Ë†Ëšâˆ†ËœËœâˆšÃ·Ã¦â€¦Â¬â‰¤ÂµËœËœÏ€Ã¸Ë†Â¨Â¥

Copied string: Hello, RISC-V!
Copied string: Assembly programming
Copied string: 1234567890

-- program is finished running (0) --
```

```test2
Enter source string: **** user input : ğŸ‘ŒğŸ‘ŒğŸ‘ŒğŸ‘ŒğŸ¤¯ğŸ¤¯ğŸ¤¯ğŸ¤¯
Copied string: ğŸ‘ŒğŸ‘ŒğŸ‘ŒğŸ‘ŒğŸ¤¯ğŸ¤¯ğŸ¤¯ğŸ¤¯

Copied string: Hello, RISC-V!
Copied string: Assembly programming
Copied string: 1234567890

-- program is finished running (0) --
```

Ğ¢ĞµÑÑ‚ Ğ½Ğ° ÑÑ‚Ñ€Ğ¾ĞºÑƒ Ğ´Ğ»Ğ¸Ğ½Ğ½Ğ¾Ğ¹ Ğ±Ğ¾Ğ»ĞµĞµ 127 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ². Ğ­Ğ¼ÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ñ‚Ğ¾Ñ€Ğ¼Ğ¾Ğ·Ğ¸Ñ‚ Ğ¸ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ¸Ñ‚ Ñ€Ğ¾Ğ²Ğ½Ğ¾ Ğ´Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ğ¾Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾, Ğ¾Ğ±Ñ€ĞµĞ·Ğ°Ñ ÑÑ‚Ñ€Ğ¾ĞºÑƒ. 
![[Pasted image 20241125185542.png]]
Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ? 
in: test string 
(Ğ¥Ğ¾Ñ‚ĞµĞ»Ğ¾ÑÑŒ, Ğ½Ğ¾ Ğ½ĞµÑƒÑĞ¿ĞµĞ»Ğ¾ÑÑŒ)

### ĞšĞ¾Ğ´
```main.asm
.include "strcopy.s"
.include "macros.s"
.include "data.s"

.text
.global main

main:
    # test string input 
    print_string msg_src

    la a0, buffer_src
    li a1, 128
    read_string()

    la t0, buffer_dest
    la t1, buffer_src
    strcpy t0, t1

    print_string msg_res
    print_string buffer_dest
    print_string msg_newline
    
    j test1

    # test string
test1:
    la t0, buffer_dest
    la t1, test1_src
    strcpy t0, t1

    print_string msg_res
    print_string buffer_dest
    print_string msg_newline
    
    j test2

    # test another string
test2:
    la t0, buffer_dest
    la t1, test2_src
    strcpy t0, t1

    print_string msg_res
    print_string buffer_dest
    print_string msg_newline
    
    j test3
    
    # test numbers
test3:
    la t0, buffer_dest
    la t1, test3_src
    strcpy t0, t1

    print_string msg_res
    print_string buffer_dest
    print_string msg_newline
    
    j end_main

end_main:
    li a7, 10
    ecall
    
```

```data.s
.data
msg_src: 	.asciz "Enter source string: "
msg_res: 	.asciz "Copied string: "
msg_newline: 	.asciz "\n"
buffer_src: 	.space 128  	# Ğ‘ÑƒÑ„ĞµÑ€ Ğ´Ğ»Ñ Ğ²Ğ²Ğ¾Ğ´Ğ° ÑÑ‚Ñ€Ğ¾ĞºĞ¸
buffer_dest:	.space 128  	# Ğ‘ÑƒÑ„ĞµÑ€ Ğ´Ğ»Ñ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°

test1_src: 	.asciz "Hello, RISC-V!"
test2_src: 	.asciz "Assembly programming"
test3_src: 	.asciz "1234567890"
```

```macros.s
.macro strcpy %dest, %src
    mv a0, %dest  # ĞŸĞµÑ€ĞµĞ´Ğ°ĞµĞ¼ Ğ°Ğ´Ñ€ĞµÑ Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ
   	mv a1, %src   # ĞŸĞµÑ€ĞµĞ´Ğ°ĞµĞ¼ Ğ°Ğ´Ñ€ĞµÑ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ°
    jal strcopy   # Ğ’Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ¿Ğ¾Ğ´Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ñƒ
.end_macro

# ĞœĞ°ĞºÑ€Ğ¾Ñ Ğ´Ğ»Ñ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ° ÑÑ‚Ñ€Ğ¾ĞºĞ¸
.macro print_string %str
	la a0, %str
	li a7, 4
	ecall
.end_macro

# ĞœĞ°ĞºÑ€Ğ¾Ñ Ğ´Ğ»Ñ Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ ÑÑ‚Ñ€Ğ¾ĞºĞ¸
.macro read_string() 
	li a7, 8
	ecall
.end_macro
```

```strcopy.s
.text
.global strcopy

# strcopy: ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞµÑ‚ ÑÑ‚Ñ€Ğ¾ĞºÑƒ Ğ¸Ğ· %src Ğ² %dest
# Ğ’Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:
# a0: Ğ°Ğ´Ñ€ĞµÑ Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ (dest)
# a1: Ğ°Ğ´Ñ€ĞµÑ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ° (src)
# Ğ’Ñ‹Ñ…Ğ¾Ğ´:
# Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ° ÑĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ° Ğ² dest, Ğ²ĞºĞ»ÑÑ‡Ğ°Ñ '\0'

strcopy:
	add t0, a0, zero  # Ğ£ĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğ° dest
	add t1, a1, zero  # Ğ£ĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğ° src

copy_loop:
	lb t2, 0(t1)      # Ğ§Ğ¸Ñ‚Ğ°ĞµĞ¼ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ» Ğ¸Ğ· src
	sb t2, 0(t0)      # ĞŸĞ¸ÑˆĞµĞ¼ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ» Ğ² dest
	beqz t2, end      # Ğ•ÑĞ»Ğ¸ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ» == '\0', Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ñ‚ÑŒ
	addi t0, t0, 1    # Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ğ²Ğ°ĞµĞ¼ ÑƒĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»ÑŒ dest
	addi t1, t1, 1    # Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ğ²Ğ°ĞµĞ¼ ÑƒĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»ÑŒ src
	j copy_loop

end:
	ret
```
